# Tool Call Display Demo

This document demonstrates the tool call display functionality implemented in the Angular chat UI, which replicates the official React implementation patterns.

## Components Overview

### 1. ToolCallsComponent
Located at: `src/app/components/tool-calls/tool-calls.component.ts`

**Purpose**: Displays AI message tool calls with formatted arguments
**Features**:
- Table layout for tool call arguments
- JSON formatting for complex values
- Tool call ID display
- Responsive design

### 2. ToolResultComponent  
Located at: `src/app/components/tool-result/tool-result.component.ts`

**Purpose**: Shows tool execution results with rich formatting
**Features**:
- JSON parsing and table display
- Expand/collapse for large content
- Tool name and call ID linking
- Syntax highlighting for code blocks

### 3. ToolCallTableComponent
Located at: `src/app/components/tool-call-table/tool-call-table.component.ts`

**Purpose**: Compact table view for tool call arguments (inbox style)
**Features**: 
- Minimal table layout
- Date formatting
- Value type detection
- Mobile-responsive breakpoints

## Demo Instructions

1. **Start the Application**:
   ```bash
   cd angular-chat-ui
   npm start
   ```

2. **Access the Demo**:
   - Navigate to `http://localhost:4200`
   - Fill in any dummy values in the setup form
   - Click "Start Chat" to enter the chat interface

3. **Load Sample Tool Calls**:
   - Click the "Demo Tool Calls" button in the controls bar
   - This will add sample AI messages with tool calls and tool results

4. **View Tool Call Display**:
   - **Tool Calls**: See formatted tool arguments in expandable tables
   - **Tool Results**: View JSON-parsed results with expand/collapse
   - **Toggle Visibility**: Use "Hide Tool Calls" checkbox to show/hide

## Sample Data Structure

### Tool Call Message
```typescript
{
  id: 'sample-ai-with-tools',
  type: 'ai',
  content: 'I need to search for information and then calculate something.',
  tool_calls: [
    {
      id: 'call_abc123',
      name: 'web_search',
      args: {
        query: 'Angular 19 new features',
        max_results: 5,
        include_snippets: true
      }
    },
    {
      id: 'call_def456', 
      name: 'calculate',
      args: {
        expression: '(15 + 25) * 0.8',
        precision: 2
      }
    }
  ]
}
```

### Tool Result Message
```typescript
{
  id: 'sample-tool-result',
  type: 'tool',
  name: 'web_search',
  tool_call_id: 'call_abc123',
  content: JSON.stringify({
    results: [
      {
        title: 'Angular 19 Features',
        url: 'https://angular.dev/features',
        snippet: 'New control flow syntax and improved SSR'
      }
    ],
    total_results: 2,
    search_time: 0.15
  })
}
```

## Technical Implementation

### React vs Angular Patterns

| Feature | React Implementation | Angular Implementation |
|---------|----------------------|------------------------|
| Tool Call Display | `ToolCalls` component | `ToolCallsComponent` |
| Tool Results | `ToolResult` component | `ToolResultComponent` |
| State Management | `useState` hooks | Angular signals |
| Animation | Framer Motion | CSS transitions |
| Expand/Collapse | React state + useEffect | Angular signals |

### Key Angular Features Used

1. **Signals**: For reactive expand/collapse state
2. **Control Flow**: New `@for` and `@if` syntax
3. **Standalone Components**: Tree-shakable architecture
4. **Type Safety**: Full TypeScript interfaces
5. **SCSS**: CSS custom properties for theming

### Responsive Design

- **Desktop**: Full table layout with sidebar styling
- **Tablet**: Compressed layout with smaller fonts
- **Mobile**: Stacked layout with block display

## Integration with LangGraph

The tool call components are designed to work seamlessly with LangGraph server responses:

1. **Tool Calls**: Generated by AI models when they decide to use tools
2. **Tool Results**: Returned by tool execution and fed back to the model
3. **Threading**: Tool calls and results are linked by `tool_call_id`
4. **Visibility**: Users can hide tool internals while preserving chat flow

## Customization

### Styling
Modify `tool-calls.component.scss`, `tool-result.component.scss` for custom themes.

### Data Formatting
Update `formatValue()` methods in components for custom value display.

### Expand/Collapse Behavior
Adjust thresholds in `ToolResultComponent` for different content size limits.

## Future Enhancements

- [ ] Syntax highlighting for code blocks
- [ ] Copy to clipboard for tool arguments/results
- [ ] Export tool call chains
- [ ] Tool call performance metrics
- [ ] Interactive tool result exploration 